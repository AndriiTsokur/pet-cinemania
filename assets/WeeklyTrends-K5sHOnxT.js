import{C as g,j as r,z as T,D as w,u as j,a as u,s as b,e as N,r as m,h as W,E as M,S as I,B as S,F as $,i as L,N as z}from"./index-C9jNz6KY.js";import{p as x,s as A,M as B}from"./MovieCard-CDzshbKc.js";const y=({categoryName:e,categoryResults:t,screen:a,genres:n,dayUpdated:s,isCatalogue:i})=>{if(!t||!Array.isArray(t))return[];let o=0,p;if(e!=="week")o=g({min:0,max:t.length}),p=f({index:o,categoryResults:t,screen:a,genres:n});else{const c=[],h=[];if(i)for(let l=0;l<20;l++)c.push(l);else for(;c.length<a.cardsInRow;){const l=g({min:0,max:t.length});!c.includes(l)&&t[l].id!==(s==null?void 0:s.id)&&c.push(l)}c.map(l=>{if(t[l]){const v=f({index:l,categoryResults:t,screen:a,genres:n});h.push(v)}}),p=[...h]}return p};function f({index:e,categoryResults:t,screen:a,genres:n}){const{backdrop:s,poster:i}=E({screen:a,movie:t[e]}),{overview:o,overview_brief:p}=F({movie:t[e],deviceType:a.deviceType}),c=D({genres:n,movie:t[e]}),h=Number(t[e].popularity).toFixed(1),l=Number(t[e].vote_average).toFixed(1);return{...t[e],backdrop_url:s,poster_url:i,overview:o,overview_brief:p,genres:c,popularity:h,vote_average:l}}const E=({screen:e,movie:t})=>{const a=t.backdrop_path?`${e.fetchBackdropURL}${t.backdrop_path}`:x,n=t.poster_path?`${e.fetchPosterURL}${t.poster_path}`:x;return{backdrop:a,poster:n}},D=({movie:e,genres:t})=>{const a=[];return e.genre_ids.length===0?a.push("Not specified"):e.genre_ids.map(n=>{const s=t==null?void 0:t.find(i=>i.id===n);s&&a.push(s.name)}),a},F=({movie:e,deviceType:t})=>{const a={overview:"",overview_brief:""};let n=0;switch(a.overview=e.overview?e.overview:"Overview not provided",t){case"mobile":n=150;break;case"tablet":n=150;break;default:n=300;break}if(e.overview.length>n){const s=[" ",",",".",":","?","!"];let i=n,o=!1;for(;!o;)s.find(c=>e.overview.charAt(i)===c)?o=!0:i++;a.overview_brief=e.overview.slice(0,i)+"..."}return a},O="_lightMode_1r426_1",P="_titleWrapper_1r426_3",q="_title_1r426_3",k={lightMode:O,titleWrapper:P,title:q},G=({children:e,title:t})=>r.jsxs("div",{className:k.titleWrapper,children:[r.jsx("h2",{className:k.title,children:t}),e]}),H="_lightMode_16ngo_1",C="_hero_16ngo_3",U="_container_16ngo_13",Y="_textWrapper_16ngo_21",J="_title_16ngo_27",K="_titleStars_16ngo_28",Q="_starsWrapper_16ngo_40",V="_stars_16ngo_40",X="_text_16ngo_21",Z="_btnWrapper_16ngo_56",d={lightMode:H,hero:C,container:U,textWrapper:Y,title:J,titleStars:K,starsWrapper:Q,stars:V,text:X,btnWrapper:Z},R="/pet-cinemania/assets/hero-plug-BdvMfPWO.jpg",ee=()=>{const e=T(),t={backgroundImage:`linear-gradient(68.84deg, rgb(17, 17, 17) 36.846%, rgba(17, 17, 17, 0) 60.047%), url(${R})`};return r.jsxs("article",{className:d.hero,style:t,children:[r.jsxs("div",{className:d.textWrapper,children:[r.jsx("h1",{className:d.title,children:"Letâ€™s Make Your Own Cinema"}),r.jsx("p",{className:d.text,children:"Is a guide to creating a personalized movie theater experience. You'll need a projector, screen, and speakers. Decorate your space, choose your films, and stock up on snacks for the full experience"})]}),r.jsx("div",{className:d.btnWrapper,children:r.jsx(w,{isGradient:!0,onClick:()=>e("/catalogue"),children:"Get started"})})]})},ce=()=>{const e=j(),{screen:t,genres:{data:a}}=u(b),{day:n,dayUpdated:s}=u(N);m.useEffect(()=>{n||e(W({period:"day"}))},[e]),m.useEffect(()=>{if(n&&a){const o=y({categoryName:"day",categoryResults:n.results,screen:t,genres:a});e(M(o))}},[e,n,a]);let i={};return s&&(i={backgroundImage:`linear-gradient(68.84deg, rgb(17, 17, 17) 36.846%, rgba(17, 17, 17, 0) 60.047%), url(${s.backdrop_url})`}),r.jsx(r.Fragment,{children:s?r.jsx("article",{className:d.hero,style:i,children:r.jsxs("div",{className:d.container,children:[r.jsxs("div",{className:d.textWrapper,children:[r.jsx("h1",{className:d.titleStars,children:s.title}),r.jsx("div",{className:d.starsWrapper,children:r.jsx(I,{value:s.vote_average})}),r.jsx("p",{className:d.text,children:s.overview_brief?s.overview_brief:s.overview})]}),r.jsxs("div",{className:d.btnWrapper,children:[r.jsx(S,{movieId:s.id}),r.jsx(w,{isGradient:!1,isOutOfColorMode:!0,onClick:()=>A({modalType:"details",movie:s,dispatch:e}),children:"More details"})]})]})}):r.jsx(ee,{})})},te="_lightMode_wqjzx_1",se="_weeklyTrends_wqjzx_3",re="_link_wqjzx_8",ae="_cardsList_wqjzx_12",ne="_cardItem_wqjzx_19",_={lightMode:te,weeklyTrends:se,link:re,cardsList:ae,cardItem:ne},le=({isCatalogue:e,weekUpdatedProp:t})=>{const a=j(),{screen:n,genres:{data:s}}=u(b),{week:i,weekUpdated:o,dayUpdated:p}=u(N);m.useEffect(()=>{e||(s||a($()),i||a(W({period:"week"})))},[a,s,i,e]),m.useEffect(()=>{if(!e&&(i&&s&&p&&!o||i&&s&&p&&o.results.length>3)){const h=y({categoryName:"week",categoryResults:i.results,screen:n,genres:s,dayUpdated:p,isCatalogue:e});a(L(h))}},[a,i,s,p,o,n,e]);const c=e?t:o;return r.jsxs("article",{className:_.weeklyTrends,children:[!e&&r.jsx(G,{title:"Weekly Trends",children:r.jsx("p",{children:r.jsx(z,{to:"/catalogue",className:_.link,children:"See all"})})}),r.jsx("ul",{className:_.cardsList,children:c==null?void 0:c.results.map(h=>r.jsx("li",{className:_.cardItem,children:r.jsx(B,{movie:h,source:"week"})},h.id))})]})};export{G as A,ce as H,le as W,y as p};
