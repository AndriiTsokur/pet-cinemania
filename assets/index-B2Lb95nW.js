import{r as b,u as g,a as _,s as v,b as M,c as u,d as C,j as e,B as k,e as $,f as T,g as I,h as L,i as S,L as B,N as G,k as P,l as y,m as U,S as z}from"./index-7pzBy-mq.js";import{p as f,M as R,s as A}from"./MovieCard-D3ZLA_13.js";const j=({categoryName:r,categoryData:t,screen:a,genres:n,dayUpdated:s})=>{let i=0,c;if(r!=="week")i=b({min:0,max:t.length}),c=w({index:i,categoryData:t,screen:a,genres:n});else{const d=[],p=[];for(;d.length<a.cardsInRow;){const h=b({min:0,max:t.length});!d.includes(h)&&t[h].id!==(s==null?void 0:s.id)&&d.push(h)}d.map(h=>{const x=w({index:h,categoryData:t,screen:a,genres:n});p.push(x)}),c=[...p]}return c};function w({index:r,categoryData:t,screen:a,genres:n}){const{backdrop:s,poster:i}=E({screen:a,movie:t[r]}),{overview:c,overview_brief:d}=O({movie:t[r],deviceType:a.deviceType}),p=F({genres:n,movie:t[r]}),h=Number(t[r].popularity).toFixed(1),x=Number(t[r].vote_average).toFixed(1);return{...t[r],backdrop_url:s,poster_url:i,overview:c,overview_brief:d,genres:p,popularity:h,vote_average:x}}const E=({screen:r,movie:t})=>{const a=t.backdrop_path?`${r.fetchBackdropURL}${t.backdrop_path}`:f,n=t.poster_path?`${r.fetchPosterURL}${t.poster_path}`:f;return{backdrop:a,poster:n}},F=({movie:r,genres:t})=>{const a=[];return r.genre_ids.length===0?a.push("Not specified"):r.genre_ids.map(n=>{const s=t==null?void 0:t.find(i=>i.id===n);s&&a.push(s.name)}),a},O=({movie:r,deviceType:t})=>{const a={overview:"",overview_brief:""};let n=0;switch(a.overview=r.overview?r.overview:"Overview not provided",t){case"mobile":n=150;break;case"tablet":n=150;break;default:n=300;break}if(r.overview.length>n){const s=[" ",",",".",":","?","!"];let i=n,c=!1;for(;!c;)s.find(p=>r.overview.charAt(i)===p)?c=!0:i++;a.overview_brief=r.overview.slice(0,i)+"..."}return a},H="_lightMode_x0hjw_1",D="_upcoming_x0hjw_3",V="_container_x0hjw_8",Y="_posterContainer_x0hjw_14",q="_poster_x0hjw_14",J="_infoContainer_x0hjw_29",K="_title_x0hjw_36",Q="_detailsWrapper_x0hjw_45",X="_column_x0hjw_52",Z="_parameterName_x0hjw_57",ee="_data_x0hjw_62",se="_releaseDate_x0hjw_66",te="_votes_x0hjw_75",re="_aboutTitle_x0hjw_88",ae="_aboutText_x0hjw_97",ne="_btnWrapper_x0hjw_105",ie="_backdrop_x0hjw_122",o={lightMode:H,upcoming:D,container:V,posterContainer:Y,poster:q,infoContainer:J,title:K,detailsWrapper:Q,column:X,parameterName:Z,data:ee,releaseDate:se,votes:te,aboutTitle:re,aboutText:ae,btnWrapper:ne,backdrop:ie},oe=()=>{var c,d;const r=g(),{screen:t,genres:{data:a}}=_(v),{data:n,dataUpdated:s}=_(M);u.useEffect(()=>{if(n&&a){const p=j({categoryName:"upcoming",categoryData:n,screen:t,genres:a});r(C(p))}},[t.deviceType,n,r]);let i="";if(s&&(i=t.deviceType==="mobile"?s.poster_url||"":s.backdrop_url||""),!!s)return e.jsxs("article",{className:o.upcoming,children:[e.jsx(W,{title:"Upcoming This Month"}),e.jsxs("div",{className:o.container,children:[e.jsx("div",{style:t.deviceType==="mobile"?{height:t.movieCardHeight}:{},className:o.posterContainer,children:e.jsx("img",{src:i,className:t.deviceType==="mobile"?o.poster:o.backdrop,alt:s.title})}),e.jsxs("div",{className:o.infoContainer,children:[e.jsx("h3",{className:o.title,children:s.title}),e.jsxs("div",{className:o.detailsWrapper,children:[e.jsxs("div",{className:o.column,children:[e.jsxs("div",{className:o.parameterName,children:[e.jsx("p",{children:"Release date"}),e.jsx("p",{children:"Vote / Votes"})]}),e.jsxs("div",{className:o.data,children:[e.jsx("p",{className:o.releaseDate,children:s.release_date}),s.vote_count===0?e.jsx("p",{children:"No votes yet"}):e.jsxs("p",{children:[e.jsx("span",{className:o.votes,children:s.vote_average})," ","/"," ",e.jsx("span",{className:o.votes,children:s.vote_count})]})]})]}),e.jsxs("div",{className:o.column,children:[e.jsxs("div",{className:o.parameterName,children:[e.jsx("p",{children:"Popularity"}),((c=s.genres)==null?void 0:c.length)===1?e.jsx("p",{children:"Genre"}):e.jsx("p",{children:"Genres"})]}),e.jsxs("div",{className:o.data,children:[e.jsx("p",{children:s.popularity}),e.jsx("p",{children:(d=s.genres)==null?void 0:d.join(", ")})]})]})]}),e.jsx("h4",{className:o.aboutTitle,children:"About"}),e.jsx("p",{className:o.aboutText,children:t.deviceType==="desktop"&&s.overview_brief?s.overview_brief:s.overview}),e.jsxs("div",{className:o.btnWrapper,children:[e.jsx(k,{movieId:s.id}),e.jsx($,{movie:s,isGradient:!1})]})]})]})]})},ce="_lightMode_11zh8_1",le="_weeklyTrends_11zh8_3",de="_link_11zh8_8",pe="_cardsList_11zh8_12",he="_cardItem_11zh8_16",m={lightMode:ce,weeklyTrends:le,link:de,cardsList:pe,cardItem:he},_e=()=>{const r=g(),{screen:t,genres:{data:a}}=_(v),{week:n,weekUpdated:s,dayUpdated:i}=_(T);return u.useEffect(()=>{a||r(I()),n||r(L("week"))},[r,a,n]),u.useEffect(()=>{if(n&&a&&i){const c=j({categoryName:"week",categoryData:n,screen:t,genres:a,dayUpdated:i});r(S(c))}},[r,n,a,i]),s?e.jsxs("article",{className:m.weeklyTrends,children:[e.jsx(W,{title:"Weekly Trends",children:e.jsx("p",{children:e.jsx(G,{to:"/catalogue",className:m.link,children:"See all"})})}),e.jsx("ul",{className:m.cardsList,children:s.map(c=>e.jsx("li",{className:m.cardItem,children:e.jsx(R,{movie:c,source:"week"})},c.id))})]}):e.jsx(B,{})},Se=()=>e.jsxs(e.Fragment,{children:[e.jsx(Ce,{}),e.jsx(_e,{}),e.jsx(oe,{})]}),me="_lightMode_1r426_1",ue="_titleWrapper_1r426_3",xe="_title_1r426_3",N={lightMode:me,titleWrapper:ue,title:xe},W=({children:r,title:t})=>e.jsxs("div",{className:N.titleWrapper,children:[e.jsx("h2",{className:N.title,children:t}),r]}),ge="_lightMode_16ngo_1",ve="_hero_16ngo_3",je="_container_16ngo_13",be="_textWrapper_16ngo_21",fe="_title_16ngo_27",we="_titleStars_16ngo_28",Ne="_starsWrapper_16ngo_40",ke="_stars_16ngo_40",Te="_text_16ngo_21",ye="_btnWrapper_16ngo_56",l={lightMode:ge,hero:ve,container:je,textWrapper:be,title:fe,titleStars:we,starsWrapper:Ne,stars:ke,text:Te,btnWrapper:ye},We="/pet-cinemania/assets/hero-plug-BdvMfPWO.jpg",Me=()=>{const r=P(),t={backgroundImage:`linear-gradient(68.84deg, rgb(17, 17, 17) 36.846%, rgba(17, 17, 17, 0) 60.047%), url(${We})`};return e.jsxs("article",{className:l.hero,style:t,children:[e.jsxs("div",{className:l.textWrapper,children:[e.jsx("h1",{className:l.title,children:"Letâ€™s Make Your Own Cinema"}),e.jsx("p",{className:l.text,children:"Is a guide to creating a personalized movie theater experience. You'll need a projector, screen, and speakers. Decorate your space, choose your films, and stock up on snacks for the full experience"})]}),e.jsx("div",{className:l.btnWrapper,children:e.jsx(y,{isGradient:!0,onClick:()=>r("/catalogue"),children:"Get started"})})]})},Ce=()=>{const r=g(),{screen:t,genres:{data:a}}=_(v),{day:n,dayUpdated:s}=_(T);u.useEffect(()=>{if(n&&a){const c=j({categoryName:"day",categoryData:n,screen:t,genres:a});r(U(c))}},[t.deviceType,n,r]);let i={};return s&&(i={backgroundImage:`linear-gradient(68.84deg, rgb(17, 17, 17) 36.846%, rgba(17, 17, 17, 0) 60.047%), url(${s.backdrop_url})`}),e.jsx(e.Fragment,{children:s?e.jsx("article",{className:l.hero,style:i,children:e.jsxs("div",{className:l.container,children:[e.jsxs("div",{className:l.textWrapper,children:[e.jsx("h1",{className:l.titleStars,children:s.title}),e.jsx("div",{className:l.starsWrapper,children:e.jsx(z,{value:s.vote_average})}),e.jsx("p",{className:l.text,children:s.overview_brief?s.overview_brief:s.overview})]}),e.jsxs("div",{className:l.btnWrapper,children:[e.jsx(k,{movieId:s.id}),e.jsx(y,{isGradient:!1,isOutOfColorMode:!0,onClick:()=>A({modalType:"details",movie:s,dispatch:r}),children:"More details"})]})]})}):e.jsx(Me,{})})};export{Se as HomePage};
