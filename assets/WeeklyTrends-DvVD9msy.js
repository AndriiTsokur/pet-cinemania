import{A as v,j as r,v as T,C as j,u as w,a as u,s as b,w as N,r as g,z as W,D as M,S as I,B as S,E as $,y as A,N as L}from"./index-BkEeokkO.js";import{p as x,s as z,M as B}from"./MovieCard-CVWZshZ8.js";const y=({categoryName:t,categoryResults:e,screen:n,genres:a,dayUpdated:s,isCatalogue:i})=>{if(!e||!Array.isArray(e))return[];let o=0,d;if(t!=="week")o=v({min:0,max:e.length}),d=f({index:o,categoryResults:e,screen:n,genres:a});else{const p=[],h=[];if(i)for(let c=0;c<20;c++)p.push(c);else for(;p.length<n.cardsInRow;){const c=v({min:0,max:e.length});!p.includes(c)&&e[c].id!==(s==null?void 0:s.id)&&p.push(c)}p.map(c=>{if(e[c]){const m=f({index:c,categoryResults:e,screen:n,genres:a});h.push(m)}}),d=[...h]}return d};function f({index:t,categoryResults:e,screen:n,genres:a}){const{backdrop:s,poster:i}=E({screen:n,movie:e[t]}),{overview:o,overview_brief:d}=O({movie:e[t],deviceType:n.deviceType}),p=D({genres:a,movie:e[t]}),h=Number(e[t].popularity).toFixed(1),c=Number(e[t].vote_average).toFixed(1);return{...e[t],backdrop_url:s,poster_url:i,overview:o,overview_brief:d,genres:p,popularity:h,vote_average:c}}const E=({screen:t,movie:e})=>{const n=e.backdrop_path?`${t.fetchBackdropURL}${e.backdrop_path}`:x,a=e.poster_path?`${t.fetchPosterURL}${e.poster_path}`:x;return{backdrop:n,poster:a}},D=({movie:t,genres:e})=>{const n=[];return t.genre_ids.length===0?n.push("Not specified"):t.genre_ids.map(a=>{const s=e==null?void 0:e.find(i=>i.id===a);s&&n.push(s.name)}),n},O=({movie:t,deviceType:e})=>{const n={overview:"",overview_brief:""};let a=0;switch(n.overview=t.overview?t.overview:"Overview not provided",e){case"mobile":a=150;break;case"tablet":a=150;break;default:a=300;break}if(t.overview.length>a){const s=[" ",",",".",":","?","!"];let i=a,o=!1;for(;!o;)s.find(p=>t.overview.charAt(i)===p)?o=!0:i++;n.overview_brief=t.overview.slice(0,i)+"..."}return n},P="_lightMode_1r426_1",q="_titleWrapper_1r426_3",C="_title_1r426_3",k={lightMode:P,titleWrapper:q,title:C},F=({children:t,title:e})=>r.jsxs("div",{className:k.titleWrapper,children:[r.jsx("h2",{className:k.title,children:e}),t]}),G="_lightMode_16ngo_1",H="_hero_16ngo_3",Y="_container_16ngo_13",J="_textWrapper_16ngo_21",K="_title_16ngo_27",Q="_titleStars_16ngo_28",U="_starsWrapper_16ngo_40",V="_stars_16ngo_40",X="_text_16ngo_21",Z="_btnWrapper_16ngo_56",l={lightMode:G,hero:H,container:Y,textWrapper:J,title:K,titleStars:Q,starsWrapper:U,stars:V,text:X,btnWrapper:Z},R="/pet-cinemania/assets/hero-plug-BdvMfPWO.jpg",ee=()=>{const t=T(),e={backgroundImage:`linear-gradient(68.84deg, rgb(17, 17, 17) 36.846%, rgba(17, 17, 17, 0) 60.047%), url(${R})`};return r.jsxs("article",{className:l.hero,style:e,children:[r.jsxs("div",{className:l.textWrapper,children:[r.jsx("h1",{className:l.title,children:"Letâ€™s Make Your Own Cinema"}),r.jsx("p",{className:l.text,children:"Is a guide to creating a personalized movie theater experience. You'll need a projector, screen, and speakers. Decorate your space, choose your films, and stock up on snacks for the full experience"})]}),r.jsx("div",{className:l.btnWrapper,children:r.jsx(j,{isGradient:!0,onClick:()=>t("/catalogue"),children:"Get started"})})]})},ce=()=>{const t=w(),{screen:e,genres:{data:n}}=u(b),{day:a,dayUpdated:s}=u(N);g.useEffect(()=>{a||t(W({period:"day"}))},[t]),g.useEffect(()=>{if(a&&n){const o=y({categoryName:"day",categoryResults:a.results,screen:e,genres:n});t(M(o))}},[t,a,n,e]);let i={};return s&&(i={backgroundImage:`linear-gradient(68.84deg, rgb(17, 17, 17) 36.846%, rgba(17, 17, 17, 0) 60.047%), url(${s.backdrop_url})`}),r.jsx(r.Fragment,{children:s?r.jsx("article",{className:l.hero,style:i,children:r.jsxs("div",{className:l.container,children:[r.jsxs("div",{className:l.textWrapper,children:[r.jsx("h1",{className:l.titleStars,children:s.title}),r.jsx("div",{className:l.starsWrapper,children:r.jsx(I,{value:s.vote_average})}),r.jsx("p",{className:l.text,children:s.overview_brief?s.overview_brief:s.overview})]}),r.jsxs("div",{className:l.btnWrapper,children:[r.jsx(S,{movieId:s.id}),r.jsx(j,{isGradient:!1,isOutOfColorMode:!0,onClick:()=>z({modalType:"details",movie:s,dispatch:t}),children:"More details"})]})]})}):r.jsx(ee,{})})},te="_lightMode_wqjzx_1",se="_weeklyTrends_wqjzx_3",re="_link_wqjzx_8",ae="_cardsList_wqjzx_12",ne="_cardItem_wqjzx_19",_={lightMode:te,weeklyTrends:se,link:re,cardsList:ae,cardItem:ne},le=({isCatalogue:t})=>{const e=w(),{screen:n,genres:{data:a}}=u(b),{week:s,weekUpdated:i,dayUpdated:o}=u(N);return g.useEffect(()=>{a||e($()),s||e(W({period:"week"}))},[e,a,s]),g.useEffect(()=>{if(s&&a&&o&&!i||s&&a&&o&&!t&&i.results.length>3){const d=y({categoryName:"week",categoryResults:s.results,screen:n,genres:a,dayUpdated:o,isCatalogue:t});e(A(d))}},[e,s,a,o,i,n,t]),r.jsxs("article",{className:_.weeklyTrends,children:[!t&&r.jsx(F,{title:"Weekly Trends",children:r.jsx("p",{children:r.jsx(L,{to:"/catalogue",className:_.link,children:"See all"})})}),r.jsx("ul",{className:_.cardsList,children:i==null?void 0:i.results.map(d=>r.jsx("li",{className:_.cardItem,children:r.jsx(B,{movie:d,source:"week"})},d.id))})]})};export{F as A,ce as H,le as W,y as p};
